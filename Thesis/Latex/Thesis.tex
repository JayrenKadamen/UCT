%% ----------------------------------------------------------------
%% Thesis.tex -- MAIN FILE (the one that you compile with LaTeX)
%% ---------------------------------------------------------------- 

% Set up the document
\documentclass[a4paper, 11pt, oneside,table]{Thesis}  % Use the "Thesis" style, based on the ECS Thesis style by Steve Gunn
\graphicspath{{Figures/}}  % Location of the graphics files (set up for graphics to be in PDF format)
% Include any extra LaTeX packages required
\usepackage[round, comma, sort&compress, authoryear]{natbib}
%\usepackage{natbib}
%\usepackage[square, numbers, comma, sort&compress]{natbib}  % Use the "Natbib" style for the references in the Bibliography

%For sideways images
\usepackage{rotating}

%For double hline in tables
\usepackage{hhline}

%Allows images to spill over the edges of the page
\usepackage[export]{adjustbox}

%Use for line split in equations
\usepackage{amsmath}

%Colours for cells in tables - if it gives you an error using [tables] option then include 'tables' in your documentclass
\usepackage[usenames,dvipsnames]{xcolor}% http://ctan.org/pkg/xcolor

%Right adjusted columns in tables
\usepackage{array,booktabs,ragged2e}
\newcolumntype{R}[1]{>{\RaggedLeft\arraybackslash}p{#1}}

\usepackage{verbatim}  % Needed for the "comment" environment to make LaTeX comments
\usepackage{vector}  % Allows "\bvec{}" and "\buvec{}" for "blackboard" style bold vectors in maths
\PassOptionsToPackage{hyphens}{url}\usepackage{hyperref}
\hypersetup{citecolor=black,
	filecolor=black,
	linkcolor=black,
	urlcolor=black,
	colorlinks=true}  % Colours hyperlinks in blue, but this can be distracting if there are many links.
\makeatletter
\g@addto@macro{\UrlBreaks}{\UrlOrds}
\makeatother
%\usepackage[hyphens]{url}

\newcommand{\HRule}{\rule{\linewidth}{0.75mm}} % New command to make the lines in the title page

%For Code Insertion
\usepackage{listings}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\lstset{frame=tb,
  language=C++,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}
%% ----------------------------------------------------------------
\begin{document}
\frontmatter	  % Begin Roman style (i, ii, iii, iv...) page numbering

	\begin{center}
		
		\textsc{\LARGE University of Cape Town}\\[1.5cm] % University name
		\textsc{\Large Undergraduate Thesis}\\[0.5cm] % Thesis type
		
		\HRule \\[0.4cm] % Horizontal line
		\title{Determining Scale within Unstructured Point Clouds}
		{\huge \bfseries Determining Scale within Unstructured Point Clouds}\\[0.4cm] % Thesis title
		\HRule \\[1.5cm] % Horizontal line
		
		\begin{minipage}{0.4\textwidth}
			\begin{flushleft} \large
				\emph{Author:}\\
				\textnormal{Jayren Kadamen} % Author name - remove the \href bracket to remove the link
			\end{flushleft}
		\end{minipage}
		\begin{minipage}{0.4\textwidth}
			\begin{flushright} \large
				\emph{Supervisor:} \\
				\textnormal{Dr. George Sithole} % Supervisor name - remove the \href bracket to remove the link  
			\end{flushright}
		\end{minipage}\\[3cm]
		
		\large \textit{A thesis submitted in partial fulfillment of the requirements\\ for a B.Sc. Degree in Geomatics}\\[0.3cm] % University requirement text
		\textit{in the}\\[0.4cm]
		Department of Geomatics\\[2cm] % Research group name and department name
		
		{\large \today}\\[1cm] % Date
		\includegraphics[scale=0.75]{./images/Logo} % University/department logo - uncomment to place it
		
		\vfill
	\end{center}
%% ----------------------------------------------------------------

\setstretch{1.3}  % It is better to have smaller font and larger line spacing than the other way round

% Define the page headers using the FancyHdr package and set up for one-sided printing
\fancyhead{}  % Clears all page headers and footers
\rhead{\thepage}  % Sets the right side header to show the page number
\lhead{}  % Clears the left side page header

\pagestyle{fancy}  % Finally, use the "fancy" page style to implement the FancyHdr headers

%% ----------------------------------------------------------------
% Declaration Page required for the Thesis, your institution may give you a different text to place here
\Declaration{

\addtocontents{toc}{\vspace{1em}}  % Add a gap in the Contents, for aesthetics

I, JAYREN KADAMEN, declare that this thesis titled, `Determining Scale within Unstructured Point Clouds' and the work presented in it are my own. I confirm that:

\begin{itemize} 
\item[\tiny{$\blacksquare$}] This work was done wholly or mainly while in candidature for an undergraduate degree at this University.
 
\item[\tiny{$\blacksquare$}] Where any part of this thesis has previously been submitted for a degree or any other qualification at this University or any other institution, this has been clearly stated.
 
\item[\tiny{$\blacksquare$}] Where I have consulted the published work of others, this is always clearly attributed.
 
\item[\tiny{$\blacksquare$}] Where I have quoted from the work of others, the source is always given. With the exception of such quotations, this thesis is entirely my own work.
 
\item[\tiny{$\blacksquare$}] I have acknowledged all main sources of help.
 
\item[\tiny{$\blacksquare$}] Where the thesis is based on work done by myself jointly with others, I have made clear exactly what was done by others and what I have contributed myself.
\\
\end{itemize}
 
 
Signed:\\
\rule[1em]{25em}{0.5pt}  % This prints a line for the signature
 
Date:\\
\rule[1em]{25em}{0.5pt}  % This prints a line to write the date
}
\clearpage  % Declaration ended, now start a new page

\begin{figure}[h!]
	\centering
	\includegraphics[width=1.255\textwidth,center]{./Figures/"Ethics Form"}
\end{figure}
\clearpage
%% ----------------------------------------------------------------
% The "Funny Quote Page"
\pagestyle{empty}  % No headers or footers for the following pages

\null\vfill
% Now comes the "Funny Quote", written in italics
\textit{``Look up at the stars and not down at your feet. Try to make sense of what you see, and wonder about what makes the universe exist. Be curious.''}

\begin{flushright}
Stephen Hawking
\end{flushright}

\vfill\vfill\vfill\vfill\vfill\vfill\null
\clearpage  % Funny Quote page ended, start a new page
%% ----------------------------------------------------------------

% The Abstract Page
\addtotoc{Abstract}  % Add the "Abstract" page entry to the Contents
\abstract{
\addtocontents{toc}{\vspace{1em}}  % Add a gap in the Contents, for aesthetics

This research set out to develop a fully automated way for determining scale in a scene represented by an unstructured point cloud. Currently neither post-processed nor real-time generation of point cloud data provide real world scales without the need for a definite measurement to be known. A proof of concept test is proposed which tests a new method where an object with generalised dimensions is recognised and used to propagate scale throughout the scene. In contrast with existing methods, at no point is a manual measurement needed within the scene, nor will a calibration pattern or object with definite dimensions be needed for the purposes of object recognition.
	
In the test, the difference between generalised and actual dimensions per object class was assessed, and a maximum difference of $3.77\%$ ($2.8cm$) was observed. The most notable finding was that a more reliable scale was provided by the ratio between objects which have dimensions determined by human anatomy (such as desks and chairs). This is in contrast to using the general dimensions of each object type to individually scale the scene. Thus better results were obtained by analysing the ratio between the heights of chair seats and desk tops using normalised values rather than using the absolute heights of these objects based on their reference value. 

Recommendations are made for further testing such as analysing different types of indoor scenes and further development for both mobile and desktop platforms.
\\~\\
\textbf{Keywords} 
\newline
Unstructured Point Cloud, Monocular Camera, Real-world Scale, Smartphones, CBIR, Object Recognition
}

\clearpage  % Abstract ended, start a new page
%% ----------------------------------------------------------------

\setstretch{1.5}  % Reset the line-spacing to 1.3 for body text (if it has changed)

% The Acknowledgements page, for thanking everyone
\acknowledgements{
\addtocontents{toc}{\vspace{1em}}  % Add a gap in the Contents, for aesthetics

I wish to express my deepest gratitude and appreciation to the following people who have contributed to the completion of this thesis:

First and foremost I would like to thank my project advisor Dr George Sithole not only for his guidance, patience, and invaluable insight during this thesis but throughout my journey through the degree as a whole. He has significantly changed the way I think, approach problems and fuelled my interest in this field of study.

Matthew Westaway for always being available to consult on problems and offer advice during the course of this thesis no matter how many times I bothered him regardless of the ridiculous hours we kept in the lab.

Laura Czerniewicz and Shonaig Harvey for proofreading my thesis in the extremely short time frame I gave them.

Dr Ramesh Govind for offering his guidance and insight as well as ensuring I continue to give my best.

The NSFAS and UCT's financial aid department without which I would not have been able to study at UCT.

}
\clearpage  % End of the Acknowledgements
%% ----------------------------------------------------------------

\pagestyle{fancy}  %The page style headers have been "empty" all this time, now use the "fancy" headers as defined before to bring them back


%% ----------------------------------------------------------------
\lhead{\emph{Contents}}  % Set the left side page header to "Contents"
\begingroup
\hypersetup{linkcolor=black}
\tableofcontents  % Write out the Table of Contents
\endgroup

%% ----------------------------------------------------------------
\lhead{\emph{List of Figures}}  % Set the left side page header to "List if Figures"
\begingroup
\hypersetup{linkcolor=black}
\listoffigures  % Write out the List of Figures
\endgroup

%% ----------------------------------------------------------------
\lhead{\emph{List of Tables}}  % Set the left side page header to "List of Tables"
\begingroup
\hypersetup{linkcolor=black}
\listoftables  % Write out the List of Tables
\endgroup

%% ----------------------------------------------------------------
\setstretch{1.5}  % Set the line spacing to 1.5, this makes the following tables easier to read
\clearpage  % Start a new page
\lhead{\emph{Abbreviations}}  % Set the left side page header to "Abbreviations"
\listofsymbols{ll}  % Include a list of Abbreviations (a table of two columns)
{
% \textbf{Acronym} & \textbf{W}hat (it) \textbf{S}tands \textbf{F}or \\
\textbf{API} & \textbf{A}pplication \textbf{P}rogramming \textbf{I}nterface\\
\textbf{AR} & \textbf{A}ugmented \textbf{R}eality \\
\textbf{BRIEF} & \textbf{B}inary \textbf{R}obust \textbf{I}ndependent \textbf{E}lementary \textbf{F}eatures\\
\textbf{CBIR} & \textbf{C}ontent-\textbf{B}ased \textbf{I}mage-\textbf{R}etrieval \\
\textbf{CSV} & \textbf{C}omma \textbf{S}pace \textbf{D}elimited\\
\textbf{DARPA} & \textbf{D}efense \textbf{A}nd \textbf{R}esearch \textbf{P}rojects \textbf{A}gency \\
\textbf{EGS} & \textbf{E}nvironmental \& \textbf{G}eographical \textbf{S}cience\\
\textbf{FAST} & \textbf{F}eatures from \textbf{A}ccelerated \textbf{S}egment \textbf{T}est \\
\textbf{FDN} & \textbf{F}ixed \textbf{D}istance \textbf{N}eighbours \\
\textbf{FLANN} & \textbf{F}ast \textbf{L}ibrary for \textbf{A}pproximate \textbf{N}earest \textbf{N}eighbors\\
\textbf{GPS} & \textbf{G}lobal \textbf{P}ositioning \textbf{S}ystem \\
\textbf{HSV} & \textbf{H}ue \textbf{S}aturation \textbf{V}alue \\
\textbf{IDE} & \textbf{I}ntegrated \textbf{D}evelopment \textbf{E}nvironment \\
\textbf{IMU} & \textbf{I}nternal \textbf{M}easurement \textbf{U}nit \\
\textbf{KNN} & \textbf{K} \textbf{N}earest \textbf{N}eighbours \\
\textbf{LiDAR} & \textbf{Li}ght \textbf{D}etection \textbf{A}nd \textbf{R}anging \\
\textbf{LSD-SLAM} & \textbf{L}arge \textbf{S}cale \textbf{D}irect Monocular-\textbf{SLAM}\\
\textbf{LS-SVM} & \textbf{L}east \textbf{S}quare-\textbf{S}upport \textbf{V}ector \textbf{M}achines \\
\textbf{MEMS} & \textbf{M}icro\textbf{E}lectro\textbf{M}echanical \textbf{S}ystems \\
\textbf{ORB} & \textbf{O}rientated FAST and \textbf{R}otated \textbf{B}RIEF\\ 
\textbf{OpenCV} & \textbf{Open} Source \textbf{C}omputer \textbf{V}ision \\
\textbf{PCA} & \textbf{P}rincipal \textbf{C}omponents \textbf{A}nalysis\\
\textbf{PCD} & \textbf{P}oint \textbf{C}loud \textbf{D}ata \\
\textbf{PCL} & \textbf{P}oint \textbf{C}loud \textbf{L}ibrary \\
\textbf{PnP} & \textbf{P}erspective \textbf{n}-\textbf{P}oint \\
\textbf{PTAM} & \textbf{P}arallel \textbf{T}racking \textbf{A}nd \textbf{M}apping \\
\textbf{RAM} & \textbf{R}andom-\textbf{A}ccess \textbf{M}emory\\
\textbf{RANSAC} & \textbf{RAN}dom \textbf{SA}mple \textbf{C}onsensus \\
\textbf{SfM} & \textbf{S}tructure \textbf{f}rom \textbf{M}otion \\
\textbf{SIFT} & \textbf{S}cale \textbf{I}nvariant \textbf{F}eature \textbf{T}ransform\\
\textbf{SLAM} & \textbf{S}imultaneous \textbf{L}ocalization \textbf{A}nd \textbf{M}apping \\
\textbf{SURF} & \textbf{S}peeded \textbf{U}p \textbf{R}obust \textbf{F}eatures \\
\textbf{VS} & \textbf{V}isual \textbf{S}tudio\\
\textbf{vSLAM} & \textbf{V}isual \textbf{SLAM}\\
\textbf{VTK} & \textbf{V}isualization \textbf{T}ool\textbf{k}it\\
\textbf{WiFi} & \textbf{W}ireless \textbf{F}idelity \\

}
%% ----------------------------------------------------------------
%\clearpage  % Start a new page
%\lhead{\emph{Physical Constants}}  % Set the left side page header to "Physical Constants"
%\listofconstants{lrcl}  % Include a list of Physical Constants (a four column table)
%{
%% Constant Name & Symbol & = & Constant Value (with units) \\
%Speed of Light & $c$ & $=$ & $2.997\ 924\ 58\times10^{8}\ \mbox{ms}^{-\mbox{s}}$ (exact)\\
%
%}

%% ----------------------------------------------------------------
%\clearpage  %Start a new page
%\lhead{\emph{Symbols}}  % Set the left side page header to "Symbols"
%\listofnomenclature{lll}  % Include a list of Symbols (a three column table)
%{
%% symbol & name & unit \\
%$a$ & distance & m \\
%$P$ & power & W (Js$^{-1}$) \\
%& & \\ % Gap to separate the Roman symbols from the Greek
%$\omega$ & angular frequency & rads$^{-1}$ \\
%}
%% ----------------------------------------------------------------
% End of the pre-able, contents and lists of things
% Begin the Dedication page

\setstretch{1.5}  % Return the line spacing back to 1.3

\pagestyle{empty}  % Page style needs to be empty for this page

%\dedicatory{For/Dedicated to/To my\ldots}

\addtocontents{toc}{\vspace{2em}}  % Add a gap in the Contents, for aesthetics


%% ----------------------------------------------------------------
\mainmatter	  % Begin normal, numeric (1,2,3...) page numbering
\pagestyle{fancy}  % Return the page headers back to the "fancy" style

% Include the chapters of the thesis, as separate files
% Just uncomment the lines as you write the chapters

\input{./Chapters/Chapter1} % Introduction

\input{./Chapters/Chapter2} % Literature Review

\input{./Chapters/Chapter3} % Method

\input{./Chapters/Chapter4} % Results & Discussion

\input{./Chapters/Chapter5} % Conclusion

\input{./Chapters/Chapter6} % Results and Discussion

%\input{./Chapters/Chapter7} % Conclusion

%% ----------------------------------------------------------------
% Now begin the Appendices, including them as separate files

\addtocontents{toc}{\vspace{2em}} % Add a gap in the Contents, for aesthetics

\appendix % Cue to tell LaTeX that the following 'chapters' are Appendices

%\input{./Appendices/AppendixA}	% Appendix Title

%\input{./Appendices/AppendixB} % Appendix Title

%\input{./Appendices/AppendixC} % Appendix Title

\addtocontents{toc}{\vspace{2em}}  % Add a gap in the Contents, for aesthetics
\backmatter

%% ----------------------------------------------------------------
\frontmatter
\label{Bibliography}
\lhead{\emph{Bibliography}}  % Change the left side page header to "Bibliography"
\bibliographystyle{agsm} % Use plainnat to alphabetically order the bibliography
%\bibliographystyle{plainnat}  % Use the "unsrtnat" BibTeX style for formatting the Bibliography
\bibliography{Bibliography}  % The references (bibliography) information are stored in the file named "Bibliography.bib"

\end{document}  % The End
%% ----------------------------------------------------------------